<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>GERADOR DE LINK PARA WHATSAPP</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/Contact-Form-Clean.css">
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css">
    <link id="favicon" rel="shortcut icon" href="favicon.png" type="image/png">
</head>
<style type="text/css">
    .navCor {background-color: #e74c3c;}
    #mensagem { color: rgb(255,255,255);font-size:18px; padding-top: 10px; }
    body {background-image: url(fundo.png); background-repeat: repeat;}
</style>
<body>
    <nav id="feedbackMensagemErro" class="navCor navbar navbar-fixed-bottom" hidden="hidden">
      <div class="container-fluid">
        <p class="navbar-text"><center><span id="mensagem">O seus dados de contato está incorreto, veja o formato DD 9XXXXXXXX</span></center></p>
      </div>
    </nav>
    <div id="formulario" class="contact-clean animated ">
    <form>
        <h2 class="text-center"><br><strong>GERADOR DE LINK PARA WHATSAPP</strong><br><br></h2>
        <span id="escrita" >
            <div class="form-group has-success"><input id="contato" maxlength="11" class="form-control" type="text" placeholder="(99) 999999999"></div>
            <div class="form-group"><textarea id="textEntrada" class="form-control" rows="14" name="message" placeholder="Escrever Texto"></textarea></div>
            <div class="form-group"><button id="bntAcao" class="btn btn-primary btn-block" type="button">GERAR LINK</button></div>
        </span>
        <span id="mostrar" hidden="hidden" >
            <div class="form-group"><textarea id="textoLink" class="form-control" rows="14" name="message" placeholder="Escrever Texto"></textarea></div>
        <div class="form-group"><button id="btnCopiar" class="btn btn-primary btn-block" type="button">COPIAR LINK</button></div>
        </span>
    </form>
    </div>
    <div class="container-fluid">
        <div class="row"></div>
    </div>
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript">
        var texto = ["https://api.whatsapp.com/send?phone=55","&text="];


        console.log(texto[0] + "kjbkjgkb");
        $("#bntAcao").on("click",function(){
            console.log("click")
            var contato = $("#contato").val();
            console.log(contato);

            if (contato.length == 11 && isNaN(contato) == false) 
            {
                console.log("quantidade correta!");
                $("#formulario").addClass("bounceIn");
                $("#escrita").hide();
                $("#mostrar").show();

                if ($("#textEntrada").val().length > 0)
                 {
                    console.log("indetificou que tem texto");
                    console.log(texto[0] + $("#contato").val() + texto[1] + $("#textEntrada").val());
                    $("#textoLink").val(texto[0] + $("#contato").val() + texto[1] + $("#textEntrada").val());
                    
                    $("#textoLink").select();
                    //document.execCommand("copy");
                 }
                 else
                 {
                    console.log("Não foi digitado nenhum texto!");
                    console.log(texto[0] + $("#contato").val());
                    $("#textoLink").select();

                    $("#textoLink").val(texto[0] + $("#contato").val());
                 }
                
            }
            else
            {
                console.log("O seu contato está incorreto veja o formato DD 9xxxxxxxx!");
                $("#feedbackMensagemErro").show();
                setTimeout(function(){$("#feedbackMensagemErro").hide();},'2500');

            }

            $("#btnCopiar").on("click",function() {
                $("#textoLink").select();
                document.execCommand("copy");
                $("#feedbackMensagemErro").css("background-color","#5cb85c") //#5cb85c
                $("#mensagem").text("Link Copiado Com Sucesso!");
                $("#feedbackMensagemErro").show();
            });

        });
    </script>
</body>

</html>